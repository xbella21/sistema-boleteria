<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dashboard Administrativo</title>
	<link rel="stylesheet" href="../../estilos/global.css">
	<link rel="stylesheet" href="../../estilos/componentes.css">
</head>
<body>
	<div id="headerContainer"></div>

	<section style="padding: 60px 0;">
		<div class="contenedor">
			<h1>Dashboard Administrativo</h1>

			<div class="grid grid-4 mb-xl">
				<div class="tarjeta text-center">
					<div style="font-size: 48px; color: var(--color-primario); font-weight: 700;" id="totalEventos">0</div>
					<div>Total Eventos</div>
				</div>
				<div class="tarjeta text-center">
					<div style="font-size: 48px; color: var(--color-secundario); font-weight: 700;" id="totalUsuarios">0</div>
					<div>Total Usuarios</div>
				</div>
				<div class="tarjeta text-center">
					<div style="font-size: 48px; color: var(--color-info); font-weight: 700;" id="totalBoletos">0</div>
					<div>Boletos Vendidos</div>
				</div>
				<div class="tarjeta text-center">
					<div style="font-size: 48px; color: var(--color-advertencia); font-weight: 700;" id="totalIngresos">$0</div>
					<div>Ingresos Totales</div>
				</div>
			</div>

			<div class="tarjeta">
				<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; flex-wrap: wrap; gap: 16px;">
					<h2 style="margin: 0;">GestiÃ³n RÃ¡pida</h2>
				</div>
				<div class="grid grid-3">
					<a href="./usuarios.html" class="tarjeta text-center" style="text-decoration: none; color: inherit;">
						<div style="font-size: 48px; margin-bottom: 8px;">ðŸ‘¥</div>
						<h3>Usuarios</h3>
						<p style="color: var(--color-gris-medio);">Gestionar usuarios del sistema</p>
					</a>
					<a href="../organizador/eventos.html" class="tarjeta text-center" style="text-decoration: none; color: inherit;">
						<div style="font-size: 48px; margin-bottom: 8px;">ðŸŽ­</div>
						<h3>Eventos</h3>
						<p style="color: var(--color-gris-medio);">Ver todos los eventos</p>
					</a>
					<a href="../eventos.html" class="tarjeta text-center" style="text-decoration: none; color: inherit;">
						<div style="font-size: 48px; margin-bottom: 8px;">ðŸ“Š</div>
						<h3>Reportes</h3>
						<p style="color: var(--color-gris-medio);">Ver reportes generales</p>
					</a>
				</div>
			</div>
		</div>
	</section>

	<div id="footerContainer"></div>

	<script src="../../scripts/config.js"></script>
	<script src="../../scripts/api-cliente.js"></script>
	<script src="../../scripts/auth.js"></script>
	<script src="../../scripts/utilidades.js"></script>
	<script src="../../scripts/header.js"></script>
	<script>
		fetch('../../componentes/header.html').then(r => r.text()).then(h => document.getElementById('headerContainer').innerHTML = h);
		fetch('../../componentes/footer.html').then(r => r.text()).then(h => document.getElementById('footerContainer').innerHTML = h);

		if (!Auth.requiereRol(CONFIG.ROLES.ADMINISTRADOR)) {}

		async function cargarDashboard() {
			try {
				const response = await apiCliente.get('/reportes/dashboard');
				const datos = response.datos;

				document.getElementById('totalEventos').textContent = datos.total_eventos || 0;
				document.getElementById('totalUsuarios').textContent = datos.total_usuarios || 0;
				document.getElementById('totalBoletos').textContent = datos.total_boletos || 0;
				document.getElementById('totalIngresos').textContent = formatearPrecio(datos.ingresos_totales || 0);

			} catch (error) {
				console.error('Error al cargar dashboard:', error);
				mostrarToast('Error al cargar estadÃ­sticas', 'error');
			}
		}

		document.addEventListener('DOMContentLoaded', cargarDashboard);
	</script>
</body>
</html>

